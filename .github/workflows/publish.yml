name: osc-sdk-java maven publishing
on:
  release:
    types: [released]

jobs:
  publish:
    environment: publish
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v2
    - uses: actions/setup-java@v3
      with:
        distribution: 'temurin' 
        java-version: '11'
        cache: 'maven'
    - name: Setup credentials
      run: .github/scripts/create-m2-settings.xml
      env:
        SONATYPE_USERNAME: ${{ secrets.SONATYPE_USERNAME }}
        SONATYPE_PASSWORD: ${{ secrets.SONATYPE_PASSWORD }}
    - name: Publish
      run: mvn deploy
        